<p-card>
  <p-header style="text-align: center;">
      <h3>Nombre de pages visitées par mois</h3>
      <form #f="ngForm">
          <div class="ui-g ui-fluid">
            <h5 class="ui-g-3">Editeur :</h5>
            <!-- <p-dropdown class="ui-g-3 form-control" [options]="selectorEditors"
              (onChange)="initStatistics()" [(ngModel)]="selectedEditor" name="selectedEditor"
              placeholder="Select a media" [group]="true" showClear="true" required>
            </p-dropdown> -->
            <p-dropdown class="ui-g-3 form-control" [options]="editors" optionLabel="name"
              (onChange)="initStatistics()" [(ngModel)]="selectedEditor" name="selectedEditor"
              placeholder="Select an editor" showClear="true" required>
            </p-dropdown>
          </div>
          <div class="ui-g ui-fluid">
            <h5 class="ui-g-3">Sélectionner la période entre le</h5>
            <p-calendar class="ui-g-3 form-control" [(ngModel)]="fromDate" name="fromDate" [showIcon]="true" required></p-calendar>
            <h5 class="ui-g-1">et le</h5>
            <p-calendar class="ui-g-3 form-control" [(ngModel)]="toDate" name="toDate" [showIcon]="true" required></p-calendar>
            <p-button type="submit" class="ui-g-2" label="fetch" [disabled]="f.invalid" (onClick)="applyFilter()"></p-button>
            <p-messages [(value)]="msgs"></p-messages>
          </div>
        </form>
  </p-header>

  <p-table scrollable=true paginator=true rows=12 *ngIf="selectedEditor && data.length > 0" [value]="data">
    <ng-template pTemplate="header">
        <tr>
            <th>Mois</th>
            <th>Nombre de pages visitées</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-statistic>
        <tr>
            <td>{{statistic.month}}/{{statistic.year}}</td>
            <td [ngClass]="statistic.pages >= maxVisit ? 'alert' : ''">{{statistic.pages}}</td>
        </tr>
    </ng-template>
    <ng-template pTemplate="footer">
      <tr>
          <td>Moyenne</td>
          <td>{{ getAverage() }}</td>
      </tr>
      <tr><h4>Nombre de DSH : TBD</h4></tr>
    </ng-template>
  </p-table>
</p-card>
